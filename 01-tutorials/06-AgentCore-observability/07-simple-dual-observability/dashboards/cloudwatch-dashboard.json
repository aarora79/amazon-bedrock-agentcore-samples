{
  "widgets": [
    {
      "type": "metric",
      "x": 0,
      "y": 0,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AgentCore/Observability",
            "RequestCount",
            {
              "stat": "Sum",
              "label": "Total Requests"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Request Rate",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Count",
            "showUnits": false
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Target Rate",
              "value": 10
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 0,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AgentCore/Observability",
            "RequestLatency",
            {
              "stat": "p50",
              "label": "P50 Latency"
            }
          ],
          [
            "...",
            {
              "stat": "p90",
              "label": "P90 Latency"
            }
          ],
          [
            "...",
            {
              "stat": "p99",
              "label": "P99 Latency"
            }
          ],
          [
            "...",
            {
              "stat": "Average",
              "label": "Average Latency"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Request Latency (ms)",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Milliseconds",
            "showUnits": false
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "P99 Target",
              "value": 30000,
              "color": "#d62728"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 6,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AgentCore/Observability",
            "ErrorCount",
            {
              "stat": "Sum",
              "label": "Total Errors"
            }
          ],
          [
            ".",
            "RequestCount",
            {
              "stat": "Sum",
              "label": "Total Requests",
              "visible": false
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Error Rate",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Count",
            "showUnits": false
          },
          "right": {
            "label": "Percent",
            "showUnits": false
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Alert Threshold",
              "value": 5,
              "color": "#d62728"
            }
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 6,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AgentCore/Observability",
            "TokensUsed",
            {
              "stat": "Sum",
              "dimensions": {
                "TokenType": "Input"
              },
              "label": "Input Tokens"
            }
          ],
          [
            "...",
            {
              "stat": "Sum",
              "dimensions": {
                "TokenType": "Output"
              },
              "label": "Output Tokens"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": true,
        "region": "us-east-1",
        "title": "Token Usage",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Tokens",
            "showUnits": false
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 6,
      "width": 8,
      "height": 6,
      "properties": {
        "metrics": [
          [
            {
              "expression": "(m2 / m1) * 100",
              "label": "Success Rate %",
              "id": "e1"
            }
          ],
          [
            "AgentCore/Observability",
            "RequestCount",
            {
              "stat": "Sum",
              "id": "m1",
              "visible": false
            }
          ],
          [
            ".",
            "SuccessCount",
            {
              "stat": "Sum",
              "id": "m2",
              "visible": false
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Success Rate",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Percent",
            "showUnits": false,
            "min": 0,
            "max": 100
          }
        },
        "annotations": {
          "horizontal": [
            {
              "label": "Target SLA",
              "value": 95,
              "color": "#2ca02c"
            }
          ]
        }
      }
    },
    {
      "type": "log",
      "x": 0,
      "y": 12,
      "width": 24,
      "height": 6,
      "properties": {
        "query": "SOURCE '/aws/agentcore-runtime/weather-time-agent'\n| fields @timestamp, @message\n| filter @message like /ERROR/ or @message like /tool_call/ or @message like /Response:/\n| sort @timestamp desc\n| limit 20",
        "region": "us-east-1",
        "stacked": false,
        "title": "Recent Traces and Errors",
        "view": "table"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 18,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AgentCore/Observability",
            "ToolCallDuration",
            {
              "stat": "Average",
              "dimensions": {
                "ToolName": "get_weather"
              },
              "label": "Weather Tool Avg"
            }
          ],
          [
            "...",
            {
              "stat": "Average",
              "dimensions": {
                "ToolName": "calculate"
              },
              "label": "Calculator Tool Avg"
            }
          ],
          [
            "...",
            {
              "stat": "p99",
              "dimensions": {
                "ToolName": "get_weather"
              },
              "label": "Weather Tool P99"
            }
          ],
          [
            "...",
            {
              "stat": "p99",
              "dimensions": {
                "ToolName": "calculate"
              },
              "label": "Calculator Tool P99"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Tool Performance",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Milliseconds",
            "showUnits": false
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 18,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [
            "AgentCore/Observability",
            "ToolCallSuccess",
            {
              "stat": "Sum",
              "dimensions": {
                "ToolName": "get_weather"
              },
              "label": "Weather Success"
            }
          ],
          [
            ".",
            "ToolCallFailure",
            {
              "stat": "Sum",
              "dimensions": {
                "ToolName": "get_weather"
              },
              "label": "Weather Failures"
            }
          ],
          [
            ".",
            "ToolCallSuccess",
            {
              "stat": "Sum",
              "dimensions": {
                "ToolName": "calculate"
              },
              "label": "Calculator Success"
            }
          ],
          [
            ".",
            "ToolCallFailure",
            {
              "stat": "Sum",
              "dimensions": {
                "ToolName": "calculate"
              },
              "label": "Calculator Failures"
            }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "us-east-1",
        "title": "Tool Success/Failure Count",
        "period": 60,
        "yAxis": {
          "left": {
            "label": "Count",
            "showUnits": false
          }
        }
      }
    }
  ]
}
